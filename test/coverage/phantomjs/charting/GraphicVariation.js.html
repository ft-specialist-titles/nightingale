<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for charting/GraphicVariation.js</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="../prettify.css">

    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header medium">
    <h1>Code coverage report for <span class="entity">charting/GraphicVariation.js</span></h1>
    <h2>
        
        Statements: <span class="metric">12.5% <small>(4 / 32)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 10)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 5)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">13.33% <small>(4 / 30)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">charting/</a> &#187; GraphicVariation.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">var Backbone = require('./../core/backbone.js');
&nbsp;
<span class="fstat-no" title="function not covered" >function getKeyLabel(d) {</span>
<span class="cstat-no" title="statement not covered" >  var property = d.get('property');</span>
<span class="cstat-no" title="statement not covered" >  var label = d.get('label') || property;</span>
<span class="cstat-no" title="statement not covered" >  return {key: property, label: label};</span>
}
&nbsp;
var GraphicVariation = Backbone.Model.extend({
&nbsp;
  defaults: {
    svg: null
  },
&nbsp;
  initialize: <span class="fstat-no" title="function not covered" >function(attributes, options) {</span>
<span class="cstat-no" title="statement not covered" >    this.variation = options.variation;</span>
<span class="cstat-no" title="statement not covered" >    this.graphic = options.graphic;</span>
<span class="cstat-no" title="statement not covered" >    this.graphicType = options.graphicType;</span>
<span class="cstat-no" title="statement not covered" >    this.errors = new Backbone.Collection([]);</span>
  },
&nbsp;
  createConfig: <span class="fstat-no" title="function not covered" >function() {</span>
    // FIXME: is it still necessary to make a copy of the data?
<span class="cstat-no" title="statement not covered" >    var data = this.graphic.chart.dataset.get('rows').map(<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>return Object.create(d)}</span>);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!data.length) <span class="cstat-no" title="statement not covered" >return;</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var xAxisProperty = this.graphic.chart.xAxis.get('property');</span>
<span class="cstat-no" title="statement not covered" >    var yAxisProperties = this.graphic.chart.yAxis.columns.map(getKeyLabel);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!xAxisProperty || !yAxisProperties.length) {</span>
<span class="cstat-no" title="statement not covered" >      return;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    var g = this.graphic.toJSON();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var config = {</span>
&nbsp;
      width: this.variation.get('width'),
      height: this.variation.get('height'),
&nbsp;
      title: g.title,
      subtitle: g.subtitle,
      source:  g.source,
      hideSource: g.noSource,
      footnote:  g.footnote,
&nbsp;
      data: data,
      dateParser: this.graphic.chart.xAxis.get('dateFormat'),
&nbsp;
      x: {
        series: {
          key: xAxisProperty,
          label: xAxisProperty
        }
      },
&nbsp;
      y: {
        series: yAxisProperties
      }
&nbsp;
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    return this.graphicType.controls.overrideConfig(config);</span>
  },
&nbsp;
  toJSON: <span class="fstat-no" title="function not covered" >function() {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var d = Backbone.Model.prototype.toJSON.call(this);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    d.graphic = this.graphic.toJSON();</span>
<span class="cstat-no" title="statement not covered" >    d.graphicType = this.graphicType.toJSON();</span>
<span class="cstat-no" title="statement not covered" >    d.variation = this.variation.toJSON();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var svg = this.attributes.svg;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (!svg) {</span>
<span class="cstat-no" title="statement not covered" >      d.svg = null;</span>
    } else {
<span class="cstat-no" title="statement not covered" >      var svgRect = svg.getBoundingClientRect();</span>
<span class="cstat-no" title="statement not covered" >      d.svg = {</span>
        width: svgRect.width,
        height: svgRect.height
      };
    }
    
<span class="cstat-no" title="statement not covered" >    return d;</span>
  }
});
&nbsp;
module.exports = GraphicVariation;
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Mar 11 2015 13:31:41 GMT+0000 (UTC)</div>
</div>

<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>

<script src="../sorter.js"></script>
</body>
</html>
